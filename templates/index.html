{% extends "base.html" %}

{% block body %}
  <h1 class="page-title" style="color: white;">Please insert the YouTube video here</h1>

  <div class="form-group" style="margin-bottom: 20px;">
    <input type="url" class="form-control" id="youtubeLink" placeholder="Paste YouTube link here..." />
  </div>

  <!-- Plain text response without any container, with margin spacing -->
  <div id="responseText" style="display: none; margin-bottom: 20px;"></div>

  <!-- Adding margin to the prompt to create spacing -->
  <h2 style="margin-top: 30px; color: white;">What can I help you with?</h2>

  <div class="form-group" style="margin-bottom: 20px;">
    <textarea class="form-control" id="userQuery" rows="4" placeholder="Enter your query here..."></textarea>
  </div>

  <button type="submit" id="submitBtn" style="margin-top: 10px; padding: 8px 15px; background-color: white; color: black; border: 2px solid black; font-size: 14px;">Submit</button>

  <script>
    // Add event listener to change text color to white on input
    document.getElementById("userQuery").addEventListener("focus", function() {
      this.style.color = "white";
      this.style.backgroundColor = "#333";
    });

    // Reset the color when user stops typing
    document.getElementById("userQuery").addEventListener("blur", function() {
      if (this.value === "") {
        this.style.color = "gray";
      }
    });

    document.getElementById("submitBtn").addEventListener("click", function() {
      const youtubeLink = document.getElementById("youtubeLink").value;
      const userQuery = document.getElementById("userQuery").value;

      // Ensure both inputs have values
      if (!youtubeLink || !userQuery) {
        alert("Please provide both the YouTube link and your query.");
        return;
      }

      // Hide the "What can I help you with?" prompt after submission
      document.querySelector("h2").style.display = "none";

      // Show the response text directly (no container)
      const responseText = document.getElementById("responseText");
      responseText.style.display = "block";
      responseText.innerText = "Processing... Please wait.";

      // TESTING ONLY
      setTimeout(function() {
        responseText.innerText = "Sed ut perspiciatis unde omnis iste natus error sit voluptatem  accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt  explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut  odit aut fugit, sed quia consequuntur magni dolores eos qui ratione  voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum  quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam  eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat  voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam  corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse  quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo  voluptas nulla pariatur?";
      }, 2000);
    });
  </script>
{% endblock %}
